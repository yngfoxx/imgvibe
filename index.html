<!DOCTYPE html>
<html>
<head>
    <title>Pintura-style Image Editor</title>
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/tui-image-editor/latest/tui-image-editor.css"
    />
    <style>
        html, body {
            height: 100%;
            margin: 0;
            background-color: #151515;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
        }
        .header {
            padding: 10px;
            background-color: #2a2a2a;
            border-bottom: 1px solid #444;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        .header button {
            background-color: #005fff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .header button:hover {
            background-color: #004ecc;
        }
        #tui-image-editor-container {
            flex-grow: 1;
        }
        .tui-image-editor-header { display: none; }
        .tui-image-editor-container { background-color: #151515; }
        .tui-image-editor-menu { background-color: #2a2a2a; border-top: 1px solid #444; }
        .tui-image-editor-submenu { background-color: #2a2a2a !important; border-top: 1px solid #444; }
        .tui-image-editor-menu .tui-image-editor-item,
        .tui-image-editor-submenu .tui-image-editor-item { border-radius: 6px; margin: 2px; }
        .tui-image-editor-menu .tui-image-editor-item:hover,
        .tui-image-editor-submenu .tui-image-editor-item:hover { background-color: #3f3f3f; }
        .tui-image-editor-menu .tui-image-editor-item.active,
        .tui-image-editor-submenu .tui-image-editor-item.active { background-color: #005fff; }
        .tui-image-editor-menu-partition,
        .tui-image-editor-submenu-partition { display: none; }
        .tui-image-editor-range-wrap label { color: #d0d0d0; }
        .tui-image-editor-range-wrap input[type=range] { -webkit-appearance: none; background: #4a4a4a; height: 4px; border-radius: 2px; }
        .tui-image-editor-range-wrap input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #005fff; cursor: pointer; border: 2px solid #fff; }
    </style>
</head>
<body>
    <div class="header">
        <input type="file" id="file-input" accept="image/*" style="display: none;" />
        <button id="open-btn">Open</button>
        <button id="export-btn">Export</button>
    </div>
    <div id="tui-image-editor-container"></div>
    <script
      type="text/javascript"
      src="https://uicdn.toast.com/tui.code-snippet/v1.5.2/tui-code-snippet.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://uicdn.toast.com/tui-color-picker/v2.2.7/tui-color-picker.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.2.0/fabric.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://uicdn.toast.com/tui-image-editor/latest/tui-image-editor.js"
    ></script>
    <script>
        const imageEditor = new tui.ImageEditor('#tui-image-editor-container', {
            includeUI: {
                // We don't load a default image, we wait for the user to open one.
                theme: {},
                initMenu: 'filter',
                menuBarPosition: 'bottom',
                menu: ['crop', 'flip', 'rotate', 'filter', 'draw', 'text'],
            },
            // The editor will fill its container
            cssMaxWidth: '100%',
            cssMaxHeight: '100%',
            usageStatistics: false
        });

        // Wire up custom buttons
        const fileInput = document.getElementById('file-input');
        const openBtn = document.getElementById('open-btn');
        const exportBtn = document.getElementById('export-btn');

        openBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', event => {
            const file = event.target.files[0];
            if (file) {
                imageEditor.loadImageFromFile(file).then(result => {
                    console.log('Image loaded', result);
                    imageEditor.clearUndoStack();
                });
            }
        });

        exportBtn.addEventListener('click', () => {
            const dataURL = imageEditor.toDataURL();
            const link = document.createElement('a');
            link.download = 'edited-image.png';
            link.href = dataURL;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        window.addEventListener('resize', () => {
            imageEditor.resizeCanvasDimension();
        });
    </script>
</body>
</html>
